import{d as T}from"./debounce.DT8DhbJn.js";import{o as v}from"./DOMUtils.CSzVlqxD.js";import{l as z,d as E}from"./event.C5jlCmtE.js";const f=(r=!0)=>{const c=window.innerWidth-document.body.clientWidth;r?(document.body.style.paddingRight=`${c}px`,document.body.style.overflow="hidden"):setTimeout(()=>{document.body.style.paddingRight="",document.body.style.overflow=""},300)},D=r=>{const{trigger:c,modal:a,onOpen:d,onClose:l}=typeof r=="string"?{}:r,m=typeof r=="string"?r:a,s=document.querySelector(c),e=document.querySelector(m);if(e){const n=e.dataset.close?.split(","),t={icon(){const i=e.querySelector('[data-id="close"]'),p=()=>{e.dataset.show="",f(!1),l?.({trigger:s,modal:e})};return{add:()=>i?.addEventListener("click",p),remove:()=>i?.removeEventListener("click",p)}},esc(){const i=p=>{e.dataset.show&&p.key==="Escape"&&(e.dataset.show="",f(!1),l?.({trigger:s,modal:e}))};return{add:()=>document.addEventListener("keydown",i),remove:()=>document.removeEventListener("keydown",i)}},overlay(){const i=e.nextElementSibling,p=()=>{e.dataset.show="",f(!1),l?.({trigger:s,modal:e})};return{add:()=>i?.addEventListener("click",p),remove:()=>i?.removeEventListener("click",p)}}},h=()=>{e.dataset.show="true",f(),d?.({trigger:s,modal:e})};return s?.addEventListener("click",h),n?.forEach(i=>{t[i]().add()}),{open(){h()},remove(){s?.removeEventListener("click",h),n?.forEach(i=>{t[i]().remove()})}}}},P=r=>{const c=document.querySelector(r);c&&(c.dataset.show="",f(!1))},Y=({trigger:r,popover:c,position:a,offset:d=10,closeOnBlur:l=!0,closeOnEsc:m=!0,onOpen:s,onClose:e})=>{const n=document.querySelector(r),t=document.querySelector(c);if(n&&t){document.body.appendChild(t),t.dataset.position=a.split("-")[0];const h=()=>{const o=n.getBoundingClientRect(),u=t.getBoundingClientRect(),w=o.top+window.scrollY-u.height-d,g=o.top+window.scrollY+o.height+d,y=o.left-u.width-d,b=o.left+o.width+d,S=o.left-(u.width-o.width)/2,O=o.left-(u.width-o.width),L=o.top+window.scrollY-(u.height-o.height)/2,C=o.top+window.scrollY,q=o.top+window.scrollY-(u.height-o.height),$={"top-start":{top:w,left:o.left},top:{top:w,left:S},"top-end":{top:w,left:O},"left-start":{top:C,left:y},left:{top:L,left:y},"left-end":{top:q,left:y},"right-start":{top:C,left:b},right:{top:L,left:b},"right-end":{top:q,left:b},"bottom-start":{top:g,left:o.left},bottom:{top:g,left:S},"bottom-end":{top:g,left:O}},{top:M,left:x}=$[a]||$.bottom;t.style.top=`${M}px`,t.style.left=`${x}px`,setTimeout(()=>{t.dataset.show=t.dataset.show==="true"?"":"true"},0),setTimeout(()=>{t.dataset.show||t.removeAttribute("data-show")},300),s?.({trigger:n,popover:t,position:a})},i=o=>{const u=o.target;!t.contains(u)&&!n.contains(u)&&t.dataset.show&&(t.dataset.show="",e?.({trigger:n,popover:t,position:a})),setTimeout(()=>{t.dataset.show||t.removeAttribute("data-show")},300)},p=o=>{o.key==="Escape"&&t.dataset.show&&(t.dataset.show="",e?.({trigger:n,popover:t,position:a}),setTimeout(()=>{t.removeAttribute("data-show")},300))},A=T(()=>{t.dataset.show="",setTimeout(()=>{t.dataset.show||t.removeAttribute("data-show")},300)}),k=new ResizeObserver(()=>{t.dataset.show&&A()});return n.addEventListener("click",h),k.observe(document.body),l&&document.addEventListener("click",i),m&&document.addEventListener("keydown",p),{remove(){n.removeEventListener("click",h),k.disconnect(),l&&document.removeEventListener("click",i),m&&document.removeEventListener("keydown",p)}}}},B=P,R=()=>{const r=document.querySelectorAll('[data-id^="w-select"]');let c=!1;v(document,"keydown",a=>{a.key==="Tab"&&(c=!0)}),v(document,"mousedown",()=>c=!1),Array.from(r).forEach(a=>{const d=a,l=d.dataset.id.split("w-select-")[1],m=d.dataset.position;if(m==="modal")D({trigger:`[data-id="${d.dataset.id}"]`,modal:`[data-id="w-options-${l}"]`,onOpen:({modal:s})=>{const e=s.querySelector("input");e&&e.focus()},onClose(s){E("selectOnClose",s)}});else{const s=T(()=>{const{width:e}=d.getBoundingClientRect(),n=document.querySelector(`[data-id="w-options-${l}"]`);n&&(n.style.width=`${e}px`)});new ResizeObserver(()=>s()).observe(document.body),Y({trigger:`[data-id="${d.dataset.id}"]`,popover:`[data-id="w-options-${l}"]`,position:m||"bottom",onOpen({popover:e}){const n=e.querySelector("input");n?n.focus():e.focus()},onClose(e){E("selectOnClose",e)}})}v(d,"focus",s=>{c&&s.currentTarget.click()})})};z("listOnSelect",r=>{const{name:c,list:a}=r,d=a.closest("dialog");if(!d)return;const l=d.dataset.id,m=l.split("w-options-")[1],s=`[data-id="w-select-${m}"]`,e=document.querySelector(s);B(`[data-id="${l}"]`),e.dataset.noUpdate||(e.value=c),E("selectOnChange",{...r,select:m})});v(document,"astro:after-swap",R);R();
